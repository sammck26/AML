<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Inventory</title>
</head>
<body>
    <%- include('../layout.ejs', { user}) %>
    <%- include('../partials/librarianSideBar.ejs', {user}) %>
    <main class="content">
        <h2>Inventory</h2>
        <!-- Button to add a new book -->
        <button onclick="location.href='/branch_librarian/inventory/new?_id=<%= user._id %>'">Add New Book</button>
    
        <!-- Scrollable Table Container -->
        <div class="table-container-2">
            <table class="styled-table">
                <thead>
                    <tr>
                        <th>Media Title</th>
                        <th>Author</th>
                        <th>Genre</th>
                        <th>Quantity</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% items.forEach(item => { %>
                        <tr>
                            <td><%= item.media_title %></td>
                            <td><%= item.author %></td>
                            <td><%= item.genre_id ? item.genre_id.genre_description : 'No Genre' %></td>
                            <td><%= item.quant %></td>
                            <td>
                                <form action="/branch_librarian/inventory/update/<%= item._id %>?_id=<%= user._id %>" method="post" style="display:inline;">
                                    <input 
                                        type="number" 
                                        name="newQuantity" 
                                        value="<%= item.quant %>" 
                                        min="0" 
                                        style="width: 60px; margin-right: 10px; padding: 3px;"
                                        required
                                    >
                                    <button type="submit" style="padding: 5px 10px; margin-right: 5px; border: none; background-color: #6095dc; color: white; cursor: pointer; border-radius: 3px;">
                                        Update
                                    </button>
                                </form>
                                <form action="/branch_librarian/inventory/delete/<%= item._id %>?_id=<%= user._id %>" method="post" style="display:inline;">
                                    <button type="submit" onclick="return confirm('Are you sure you want to delete this item?')" 
                                            style="padding: 5px 10px; border: none; background-color: #f44336; color: white; cursor: pointer; border-radius: 3px;">
                                        Delete
                                    </button>
                                </form>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
            </table>
        </div>
    </main>
    

    <footer>
        <div class="footer-content">
            <p class="footer-number">07477045595</p>
            <div class="footer-links">
                <a href="https://instagram.com" target="_blank"><i class="fa-brands fa-instagram fa-xl"></i></a>
                <a href="https://facebook.com" target="_blank"><i class="fa-brands fa-facebook fa-xl"></i></a>
                <a href="https://x.com" target="_blank"><i class="fa-brands fa-x-twitter fa-xl"></i></a>
            </div>
        </div>
    </footer>
</body>
</html>
