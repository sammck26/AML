<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <!-- Include layout (header or top navigation) -->
     <div>
    <%- include('../layout.ejs', { user }) %>
    </div>
    <!-- Profile Page Container with Sidebar and Main Content -->
    <div class="profile-page"> <!-- for some reason if margin is here it wokrs -->
        
        <!-- Vertical Sidebar -->
        <%- include('../partials/userSideBar.ejs', {user}) %>
        
        <!-- Main Content Area -->
        <main class="content">
            <form action="/user/subscribe?_id=<%= user._id %>" method="POST">
                <div class="row">
                    <div class="col">
                        <h3 class="title">Billing Address</h3>
                        <div class="inputBox">
                            <label for="full_name">Full Name:</label>
                            <input type="text" id="full_name" name="full_name" placeholder="Enter your full name" required>
                        </div>
            
                        <div class="inputBox">
                            <label for="email">Email:</label>
                            <input type="email" id="email" name="email" placeholder="Enter email address" required>
                        </div>
            
                        <div class="inputBox">
                            <label for="address">Address:</label>
                            <input type="text" id="address" name="address" placeholder="Enter address" required>
                        </div>
            
                        <div class="flex">
                            <div class="inputBox">
                                <label for="county">County:</label>
                                <input type="text" id="county" name="county" placeholder="Cambridgeshire" required>
                            </div>
            
                            <div class="inputBox">
                                <label for="postcode">Postcode:</label>
                                <input type="text" id="postcode" name="postcode" placeholder="CB22 4N1" required>
                            </div>
                        </div>
                    </div>
            
                    <div class="col">
                        <h3 class="title">Payment</h3>
                        <label>Â£10 Monthly Subscription</label>
            
                        <div class="inputBox">
                            <label for="end_date">End Date:</label>
                            <input type="date" id="end_date" name="end_date" required>
                        </div>
            
                        <div class="inputBox">
                            <label for="card_number">Credit Card Number:</label>
                            <input type="text" id="card_number" name="card_number" placeholder="1111-2222-3333-4444" maxlength="19" required>
                        </div>
            
                        <div class="inputBox">
                            <label for="exp_month">Exp Month:</label>
                            <select name="exp_month" id="exp_month" required>
                                <option value="">Choose month</option>
                                <option value="1">January</option>
                                <option value="2">February</option>
                                <option value="3">March</option>
                                <option value="4">April</option>
                                <option value="5">May</option>
                                <option value="6">June</option>
                                <option value="7">July</option>
                                <option value="8">August</option>
                                <option value="9">September</option>
                                <option value="10">October</option>
                                <option value="11">November</option>
                                <option value="12">December</option>
                            </select>
                        </div>
            
                        <div class="flex">
                            <div class="inputBox">
                                <label for="exp_year">Exp Year:</label>
                                <select name="exp_year" id="exp_year" required>
                                    <option value="">Choose Year</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                    <option value="2027">2027</option>
                                </select>
                            </div>
            
                            <div class="inputBox">
                                <label for="cvv">CVV:</label>
                                <input type="number" id="cvv" name="cvv" placeholder="1234" required>
                            </div>
                        </div>
                    </div>
                </div>
                <input type="submit" value="Proceed to Checkout" class="submit_btn">
            </form>
            
    
        </div>
         <script>

            document.addEventListener('DOMContentLoaded', () => {
            const cardNumInput = document.querySelector('#cardNum');

                if (cardNumInput) {
                    cardNumInput.addEventListener('keyup', () => {
                        let cNumber = cardNumInput.value;
                        cNumber = cNumber.replace(/\s/g, ""); // Remove spaces

                        if (!isNaN(cNumber)) { // Ensure input is numeric
                            cNumber = cNumber.match(/.{1,4}/g); // Split into groups of 4
                            if (cNumber) {
                                cNumber = cNumber.join(" "); // Join with spaces
                                cardNumInput.value = cNumber; // Update input
                            }
                        }
                    });
                }
            });

         </script>
        </main>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p class="footer-number">07477045595</p>
            <div class="footer-links">
                <a href="https://instagram.com" target="_blank"><i class="fa-brands fa-instagram fa-xl"></i></a>
                <a href="https://facebook.com" target="_blank"><i class="fa-brands fa-facebook fa-xl"></i></a>
                <a href="https://x.com" target="_blank"><i class="fa-brands fa-x-twitter fa-xl"></i></a>
            </div>
        </div>
    </footer>
</body>
</html>
