<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wishlist</title>
</head>
<body>
    <!-- Include layout (header or top navigation) -->
    <%- include('../layout.ejs', { user }) %>

    <!-- Profile Page Container with Sidebar and Main Content -->
    <div class="profile-page">
        
        <!-- Vertical Sidebar -->
        <nav class="sidebar">
            <ul>
                <li><a href="/user/profile" class="<%= (typeof activePage !== 'undefined' && activePage === 'profile') ? 'active' : '' %>">Update Details</a></li>
                <li><a href="/user/wishlist" class="<%= (typeof activePage !== 'undefined' && activePage === 'wishlist') ? 'active' : '' %>">My wishlist</a></li>
                <li><a href="/user/borrowed_media" class="<%= (typeof activePage !== 'undefined' && activePage === 'borrowed_media') ? 'active' : '' %>">Borrowed media</a></li>
                <li><a href="#billing">Manage Subscription</a></li>
            </ul>
        </nav>

        <!-- display wishlist, no items displayed if array is empty -->
        <main class="content">
            <div class="card-grid">
                <% if (items && items.length > 0) { %>
                    <% items.forEach(item => { %>
                        <div class="card">
                        <a href="/user/view_media/<%= item._id %>?_id=<%= user._id %>">
                            <h2 class="media-title">Title: <%= item.media_title %></h2>
                        </a>
                        <h3>Author: <%= item.author %></h3>
                        <h3>Genre: <%= item.genre_id ? item.genre_id.genre_description : 'Unknown' %></h3>
                        <h3>Status: <%= item.quant %></h3>
                        </div>
                    <% }) %>
                <% } else { %>
                    <p>No items in your wishlist.</p>
                <% } %>
            </div>

        </main>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p class="footer-number">07477045595</p>
            <div class="footer-links">
                <a href="https://instagram.com" target="_blank"><i class="fa-brands fa-instagram fa-xl"></i></a>
                <a href="https://facebook.com" target="_blank"><i class="fa-brands fa-facebook fa-xl"></i></a>
                <a href="https://x.com" target="_blank"><i class="fa-brands fa-x-twitter fa-xl"></i></a>
            </div>
        </div>
    </footer>
</body>
</html>
